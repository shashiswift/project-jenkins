'use strict';$(document).ready(function(){function d(b){var a=$(".search").val()?btoa($(".search").val()):"NULL";$.ajax({url:e+"Role/role_listing/"+a+"/"+b,type:"get",dataType:"json",success:function(c){$("#application_pagination").html(c.pagination);c=c.result;$("#application_list").empty();$("#application_list").html(c)}})}var e=$("body").attr("data-url"),g=$('meta[name="_tokken"]').attr("content"),f=0;d(f);$("#application_pagination").on("click","a",function(b){b.preventDefault();f=$(this).attr("data-ci-pagination-page");
d(f)});$(document).on("click",".search_listing",function(){d(0)});$(document).on("click",".clear_listing",function(){$(".search").val("");d(0)});var h=1;$(document).on("submit",".add_submit",function(b){b.preventDefault();var a=$(this);1==h?$.ajax({async:!0,url:e+"Role/add",type:"post",data:$(this).serialize(),success:function(c){$(".role_errors").html("");c=$.parseJSON(c);0<c.status?(d(0),h=1,iziToast.success({title:"success",message:c.msg,position:"topRight"}),$('#add_application button[data-dismiss="modal"]').click(),
a.trigger("reset")):(h=1,iziToast.warning({title:"ERROR",message:c.msg,position:"topRight"}));c.errors?$(".role_errors").html(c.errors):$(".role_errors").html("")},error:function(c){console.log(c)}}):iziToast.warning({title:"ERROR",message:"WAIT FOR RESPONSE",position:"topRight"})});(function(){$.ajax({async:!0,url:e+"Role/fetch_list",type:"post",data:{_tokken:g},success:function(b){b=$.parseJSON(b);$("#permission_Set_html").empty();b?$("#permission_Set_html").html(b):$("#permission_Set_html").html('<h6 class="text-center">NO OPERATION FOUND</h6>')}})})();
$(document).on("click",".edit_role",function(){var b=$(this).data("id");$.ajax({async:!0,url:e+"Role/role_get",type:"post",data:{id:b,_tokken:g},success:function(a){if(a=$.parseJSON(a))$('.edit_submit_application input[name="name"]').val(a.name),$(".edit_application_id").val(a.role_id)},error:function(a){console.log(a)}})});$(document).on("submit",".edit_submit_application",function(b){b.preventDefault();$(this);$.ajax({async:!0,url:e+"Role/edit",type:"post",data:$(this).serialize(),success:function(a){$(".role_edit_errors").html("");
a=$.parseJSON(a);0<a.status?(d(f),iziToast.success({title:"success",message:a.msg,position:"topRight"}),$('#edit_application button[data-dismiss="modal"]').click()):iziToast.warning({title:"ERROR",message:a.msg,position:"topRight"});a.errors?$(".role_edit_errors").html(a.errors):$(".role_edit_errors").html("")},error:function(a){console.log(a)}})});$(document).on("submit",".role_permission",function(b){b.preventDefault();$.ajax({async:!0,url:e+"Role/save_permission",type:"post",data:$(this).serialize(),
success:function(a){$(".role_edit_errors").html("");a=$.parseJSON(a);0<a.status?(d(f),iziToast.success({title:"success",message:a.msg,position:"topRight"}),$('#role_permission button[data-dismiss="modal"]').click()):iziToast.warning({title:"ERROR",message:a.msg,position:"topRight"})},error:function(a){console.log(a)}})});$(document).on("click",".permission",function(){$(".role_permission")[0].reset();var b=$(this).data("id");$("#role_permission input[name='role_id']").val(b);(b=function(a){var c;
$.ajax({url:e+"Role/fetch_permission",type:"post",async:!1,data:{role_id:a,_tokken:g},success:function(k){c=0!=k?$.parseJSON(k):!1}});return c}(b))&&$.each(b,function(a,c){$('.role_permission input[value="'+c+'"]').prop("checked",!0)})})});