'use strict';$(document).ready(function(){const e=$("body").attr("data-url");$('meta[name="_tokken"]').attr("content");customer_list(".gmark_customer_list","");country_list(".country_list","");var c=$(".product tbody tr").length;currency();$(".add-row").click(function(){var a='<tr ><td><textarea  name="product_con['+c+'][hs_code]" class="form-control"></textarea></td><td><textarea  name="product_con['+c+'][product]" class="form-control"></textarea></td><td><textarea  name="product_con['+c+'][trade_mark]" class="form-control"></textarea></td><td><textarea  name="product_con['+
c+'][mode_type_ref]" class="form-control"></textarea></td><td><textarea  name="product_con['+c+'][technical_details]" class="form-control"></textarea></td><td><input type="checkbox" name="record"></td></tr>';$(".product tbody").append(a);c++});$(".delete-row").on("click",function(){$(".product tbody").find('input[name="record"]').each(function(){$(this).is(":checked")&&$(this).parents("tr").remove()})});$("form[name='customer_add']").validate({rules:{entity_name:"required",address:"required",country:"required",
contact_name:"required",contact_title:"required",phn_no:"required",email:"required"},messages:{ex_method_name:"This is required field please fill it",entity_name:"This is required field please fill it",address:"This is required field please fill it",country:"This is required field please fill it",contact_name:"This is required field please fill it",contact_title:"This is required field please fill it",phn_no:"This is required field please fill it",email:"This is required field please fill it"}});
$("form[name='manufacture_Add']").validate({rules:{entity_name:"required",address:"required",country:"required",contact_name:"required",contact_title:"required",phn_no:"required",email:"required",department:"required"},messages:{ex_method_name:"This is required field please fill it",entity_name:"This is required field please fill it",address:"This is required field please fill it",country:"This is required field please Select it",contact_name:"This is required field please fill it",contact_title:"This is required field please fill it",
phn_no:"This is required field please fill it",email:"This is required field please fill it",department:"This is required field please fill it"}});$("form[name='factory_Add']").validate({rules:{entity_name:"required",address:"required",country:"required",contact_name:"required",contact_title:"required",phn_no:"required",email:"required",department:"required"},messages:{ex_method_name:"This is required field please fill it",entity_name:"This is required field please fill it",address:"This is required field please fill it",
country:"This is required field please Select it",contact_name:"This is required field please fill it",contact_title:"This is required field please fill it",phn_no:"This is required field please fill it",email:"This is required field please fill it",department:"This is required field please fill it"}});$(".customer_add").on("click",function(){1==$("form[name='customer_add']").valid()?$.ajax({url:e+"Gmark/customer_Add",method:"POST",data:$("#customer_Addd").serialize(),success:function(a){a=$.parseJSON(a);
0<a.status?(iziToast.success({title:"SUCCESS",message:a.msg,position:"topRight"}),$("#applicant_add").modal("hide"),$("form[name='customer_add']").trigger("reset"),customer_list(".gmark_customer_list","")):iziToast.error({title:"ERROR",message:a.msg,position:"topRight"});a.errors?$(".error_custmer_add").html(a.errors):$(".error_custmer_add").html("")},error:function(){iziToast.error({title:"ERROR",message:"Something went wrong",position:"topRight"})}}):iziToast.error({title:"ERROR",message:"Please fill all fields",
position:"topRight"})});$(".manufacture_customer_Addd").on("click",function(){1==$("form[name='manufacture_Add']").valid()?$.ajax({url:e+"Gmark/customer_Add",method:"POST",data:$("#manufacture_Add").serialize(),success:function(a){a=$.parseJSON(a);0<a.status?(iziToast.success({title:"SUCCESS",message:a.msg,position:"topRight"}),$("#manufacture_Add_modal").modal("hide"),$("form[name='manufacture_Add']").trigger("reset"),customer_list(".gmark_customer_list","")):iziToast.error({title:"ERROR",message:a.msg,
position:"topRight"});a.errors?$(".error_manufacture_Add").html(a.errors):$(".error_manufacture_Add").html("")},error:function(){iziToast.error({title:"ERROR",message:"Something went wrong",position:"topRight"})}}):iziToast.error({title:"ERROR",message:"Please fill all fields",position:"topRight"})});$(".factory_customer_Addd").on("click",function(){1==$("form[name='factory_Add']").valid()?$.ajax({url:e+"Gmark/customer_Add",method:"POST",data:$("#factory_Add").serialize(),success:function(a){a=$.parseJSON(a);
0<a.status?(iziToast.success({title:"SUCCESS",message:a.msg,position:"topRight"}),$("#factory_Add_modal").modal("hide"),$("form[name='factory_Add']").trigger("reset"),customer_list(".gmark_customer_list","")):iziToast.error({title:"ERROR",message:a.msg,position:"topRight"});a.errors?$(".error_licensee_customer_Addd").html(a.errors):$(".error_licensee_customer_Addd").html("")},error:function(){iziToast.error({title:"ERROR",message:"Something went wrong",position:"topRight"})}}):iziToast.error({title:"ERROR",
message:"Please fill all fields",position:"topRight"})});$(".shipment_method").on("click",()=>{"OTHER"==$("input[name='shipment_method']:checked").val()?$(".shipment_method_desc").fadeIn():$(".shipment_method_desc").fadeOut()});$(".packing_details").on("click",()=>{var a=$("input[name='packing_details']:checked").val();"X 20'FCL"==a||"X 40'FCL"==a?$(".x-40").fadeIn():$(".packing_details_desc").fadeOut()});$(".iso_accredition").on("click",()=>{"OTHER"==$("input[name='iso_17025_accredition']:checked").val()?
$(".iso_accredition_other").fadeIn():$(".iso_accredition_other").fadeOut()});$(".shipment_method_desc").fadeOut();$(".packing_details_desc").fadeOut();$(".iso_accredition_other").fadeOut();$(document).on("submit",".rfc_form",function(a){$("body").append('<div class="pageloader"></div>');a.preventDefault();$.ajax({method:"POST",url:e+"Gmark/submit_edit_rfc",data:$(this).serialize(),success:function(b){$(".pageloader").remove();$(".error_remove").remove();b=$.parseJSON(b);0<b.status?(iziToast.success({title:"SUCCESS",
message:b.msg,position:"topRight"}),setTimeout(function(){location.href=e+"Gmark/"},1E3)):iziToast.error({title:"ERROR",message:b.msg,position:"topRight"});b.errors?($.each(b.errors,function(d,f){$(".rfc_form select[name='"+d+"']").after('<span class="error_remove text-danger">'+f+"</span>");$(".rfc_form input[name='"+d+"']").after('<span class="error_remove text-danger">'+f+"</span>");$(".rfc_form textarea[name='"+d+"']").after('<span class="error_remove text-danger">'+f+"</span>")}),$("#error_rfc").html(b.errors)):
$("#error_rfc").html("");form_submit=1},error:function(b){$(".pageloader").remove();console.log(b);form_submit=1;iziToast.error({title:"ERROR",message:"Something went wrong",position:"topRight"})}})})});const base_url=$("body").attr("data-url"),_tokken=$('meta[name="_tokken"]').attr("content");
function customer_list(e,c){$.ajax({method:"POST",url:base_url+"Gmark/get_customer",data:{_tokken},success:function(a){html=$.parseJSON(a);$(e).html('<option value="" >PLEASE SELECT</option>');$.each(html,function(b,d){c?c==d.customers_id?$(e).append('<option selected value="'+d.customers_id+'" >'+d.entity_name+"</option>"):$(e).append($("<option>",{value:d.customers_id,text:d.entity_name})):$(e).append($("<option>",{value:d.customers_id,text:d.entity_name}))})}})}
function country_list(e,c){$.ajax({method:"POST",url:base_url+"Gmark/fetch_country",data:{_tokken},success:function(a){html=$.parseJSON(a);$(e).html('<option value="0">SELECT COUNTRY </option>');$.each(html,function(b,d){c?c==d.country_id?$(e).append('<option selected value="'+d.country_id+'">'+d.country_name+"</option>"):$(e).append($("<option>",{value:d.country_id,text:d.country_name})):$(e).append($("<option>",{value:d.country_id,text:d.country_name}))})}})}
function currency(e){$.ajax({url:base_url+"Gmark/currency",method:"POST",data:{_tokken},success:function(c){c=$.parseJSON(c);e?$.each(c,function(a,b){e==b.code?$(".currency").append('<option selected value="'+b.code+'">'+b.name+"</option>"):$(".currency").append($("<option>",{value:b.code,text:b.name}))}):$.each(c,function(a,b){$(".currency").append($("<option>",{value:b.code,text:b.name}))})},error:function(c){console.log(c)}})};